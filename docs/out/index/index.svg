<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3262.5px" preserveAspectRatio="none" style="width:1336px;height:3262px;background:#222222;" version="1.1" viewBox="0 0 1336 3262" width="1336.4583px" zoomAndPan="magnify"><defs/><g><!--MD5=[caec09aa8b1aae56fb92cfb12d3d663f]
cluster visual_objects--><rect fill="#222222" height="125" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;" width="167.7083" x="17.7083" y="658.3333"/><path d="M179.1667,658.3333 L179.1667,687.6628 L168.75,698.0794 L17.7083,698.0794 " fill="none" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;"/><text fill="#2A9FD6" font-family="&quot;Verdana&quot;" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="140.625" x="26.0417" y="686.2101">visual_objects</text><!--MD5=[b33187c248a40138ad0b3413979d5dfd]
cluster event_mixin--><rect fill="#222222" height="150" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;" width="144.7917" x="362.5" y="17.7083"/><path d="M501.0417,17.7083 L501.0417,47.0378 L490.625,57.4544 L362.5,57.4544 " fill="none" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;"/><text fill="#2A9FD6" font-family="&quot;Verdana&quot;" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="117.7083" x="370.8333" y="45.5851">event_mixin</text><!--MD5=[02430d46d4d246becbecf302768ae4a3]
cluster ui_components--><rect fill="#222222" height="125" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;" width="178.125" x="1146.875" y="2164.0625"/><path d="M1318.75,2164.0625 L1318.75,2193.3919 L1308.3333,2203.8086 L1146.875,2203.8086 " fill="none" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;"/><text fill="#2A9FD6" font-family="&quot;Verdana&quot;" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="151.0417" x="1155.2083" y="2191.9393">ui_components</text><!--MD5=[2265efe58f509802ec1fe9822d1e6e2b]
cluster index--><rect fill="#222222" height="3020.8333" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;" width="911.4583" x="210.4167" y="230.2083"/><path d="M284.375,230.2083 L284.375,259.5378 L273.9583,269.9544 L210.4167,269.9544 " fill="none" style="stroke:#2A9FD6;stroke-width:1.0416666666666667;"/><text fill="#2A9FD6" font-family="&quot;Verdana&quot;" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="53.125" x="218.75" y="258.0851">index</text><!--MD5=[a91f50bfee47489d1e6d2d80041782dc]
class VisualObject--><rect codeLine="24" height="51.9124" id="VisualObject" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="105.2083" x="63.0208" y="714.5833"/><ellipse cx="77.6042" cy="732.2062" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M79.1504,729.2928 Q79.2643,729.13 79.4027,729.0487 Q79.541,728.9673 79.7038,728.9673 Q79.9805,728.9673 80.1514,729.1626 Q80.3223,729.3579 80.3223,729.7974 L80.3223,730.8716 Q80.3223,731.311 80.1514,731.5063 Q79.9805,731.7017 79.7038,731.7017 Q79.4434,731.7017 79.2969,731.5552 Q79.1504,731.425 79.069,731.0343 Q79.0365,730.7739 78.9063,730.6437 Q78.6458,730.367 78.1982,730.2043 Q77.7507,730.0415 77.2949,730.0415 Q76.7415,730.0415 76.2695,730.2856 Q75.7975,730.5298 75.4395,731.075 Q75.0814,731.6203 75.0814,732.3853 L75.0814,733.1991 Q75.0814,734.0942 75.7406,734.6965 Q76.3997,735.2987 77.5553,735.2987 Q78.2552,735.2987 78.7435,735.1196 Q79.0202,735.0057 79.3294,734.6802 Q79.5247,734.4849 79.6387,734.4279 Q79.7526,734.3709 79.8828,734.3709 Q80.1432,734.3709 80.3304,734.5581 Q80.5176,734.7453 80.5176,735.0057 Q80.5176,735.2661 80.2572,735.5591 Q79.8828,735.9823 79.2969,736.2264 Q78.5156,736.5519 77.5716,736.5519 Q76.4486,736.5519 75.5697,736.0962 Q74.8372,735.7381 74.3327,734.9406 Q73.8281,734.1431 73.8281,733.2153 L73.8281,732.369 Q73.8281,731.3924 74.2839,730.5461 Q74.7396,729.6997 75.5452,729.244 Q76.3509,728.7882 77.2461,728.7882 Q77.7995,728.7882 78.2715,728.9103 Q78.7435,729.0324 79.1504,729.2928 Z " fill="#000000"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="63.5417" x="96.3542" y="736.8947">VisualObject</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="64.0625" x2="167.1875" y1="749.8291" y2="749.8291"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="64.0625" x2="167.1875" y1="758.1624" y2="758.1624"/><!--MD5=[8c7ae7c48af0001487202e87675f85b8]
class EventMixin--><rect codeLine="28" height="77.5208" id="EventMixin" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="94.7917" x="386.9792" y="73.9583"/><ellipse cx="401.5625" cy="104.3854" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M403.1087,101.472 Q403.2227,101.3092 403.361,101.2278 Q403.4993,101.1464 403.6621,101.1464 Q403.9388,101.1464 404.1097,101.3418 Q404.2806,101.5371 404.2806,101.9765 L404.2806,103.0507 Q404.2806,103.4902 404.1097,103.6855 Q403.9388,103.8808 403.6621,103.8808 Q403.4017,103.8808 403.2552,103.7343 Q403.1087,103.6041 403.0273,103.2135 Q402.9948,102.9531 402.8646,102.8229 Q402.6042,102.5462 402.1566,102.3834 Q401.709,102.2207 401.2533,102.2207 Q400.6999,102.2207 400.2279,102.4648 Q399.7559,102.7089 399.3978,103.2542 Q399.0397,103.7994 399.0397,104.5644 L399.0397,105.3782 Q399.0397,106.2734 399.6989,106.8756 Q400.3581,107.4778 401.5137,107.4778 Q402.2135,107.4778 402.7018,107.2988 Q402.9785,107.1849 403.2878,106.8593 Q403.4831,106.664 403.597,106.6071 Q403.7109,106.5501 403.8411,106.5501 Q404.1016,106.5501 404.2887,106.7373 Q404.4759,106.9244 404.4759,107.1849 Q404.4759,107.4453 404.2155,107.7382 Q403.8411,108.1614 403.2552,108.4056 Q402.474,108.7311 401.5299,108.7311 Q400.4069,108.7311 399.528,108.2753 Q398.7956,107.9173 398.291,107.1198 Q397.7865,106.3222 397.7865,105.3945 L397.7865,104.5481 Q397.7865,103.5716 398.2422,102.7252 Q398.6979,101.8789 399.5036,101.4231 Q400.3092,100.9674 401.2044,100.9674 Q401.7578,100.9674 402.2298,101.0895 Q402.7018,101.2115 403.1087,101.472 Z " fill="#000000"/><text fill="#ADAFAE" font-family="Verdana" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="51.0417" x="421.3542" y="96.9421">«mixin»</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="53.125" x="420.3125" y="121.8781">EventMixin</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="388.0208" x2="480.7292" y1="134.8124" y2="134.8124"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="388.0208" x2="480.7292" y1="143.1458" y2="143.1458"/><!--MD5=[e3c8f40566953754a47b0e108c7ab5cb]
class ObjectFrame--><rect codeLine="32" height="51.9124" id="ObjectFrame" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="105.2083" x="1164.0625" y="2220.3125"/><ellipse cx="1178.6458" cy="2237.9354" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M1180.1921,2235.022 Q1180.306,2234.8592 1180.4443,2234.7778 Q1180.5827,2234.6965 1180.7454,2234.6965 Q1181.0221,2234.6965 1181.193,2234.8918 Q1181.3639,2235.0871 1181.3639,2235.5265 L1181.3639,2236.6007 Q1181.3639,2237.0402 1181.193,2237.2355 Q1181.0221,2237.4308 1180.7454,2237.4308 Q1180.485,2237.4308 1180.3385,2237.2843 Q1180.1921,2237.1541 1180.1107,2236.7635 Q1180.0781,2236.5031 1179.9479,2236.3729 Q1179.6875,2236.0962 1179.2399,2235.9334 Q1178.7923,2235.7707 1178.3366,2235.7707 Q1177.7832,2235.7707 1177.3112,2236.0148 Q1176.8392,2236.259 1176.4811,2236.8042 Q1176.123,2237.3494 1176.123,2238.1144 L1176.123,2238.9282 Q1176.123,2239.8234 1176.7822,2240.4256 Q1177.4414,2241.0278 1178.597,2241.0278 Q1179.2969,2241.0278 1179.7852,2240.8488 Q1180.0618,2240.7349 1180.3711,2240.4093 Q1180.5664,2240.214 1180.6803,2240.1571 Q1180.7943,2240.1001 1180.9245,2240.1001 Q1181.1849,2240.1001 1181.3721,2240.2873 Q1181.5592,2240.4744 1181.5592,2240.7349 Q1181.5592,2240.9953 1181.2988,2241.2882 Q1180.9245,2241.7114 1180.3385,2241.9556 Q1179.5573,2242.2811 1178.6133,2242.2811 Q1177.4902,2242.2811 1176.6113,2241.8254 Q1175.8789,2241.4673 1175.3743,2240.6698 Q1174.8698,2239.8722 1174.8698,2238.9445 L1174.8698,2238.0981 Q1174.8698,2237.1216 1175.3255,2236.2752 Q1175.7813,2235.4289 1176.5869,2234.9731 Q1177.3926,2234.5174 1178.2878,2234.5174 Q1178.8411,2234.5174 1179.3132,2234.6395 Q1179.7852,2234.7616 1180.1921,2235.022 Z " fill="#000000"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="63.5417" x="1197.3958" y="2242.6239">ObjectFrame</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="1165.1042" x2="1268.2292" y1="2255.5583" y2="2255.5583"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="1165.1042" x2="1268.2292" y1="2263.8916" y2="2263.8916"/><!--MD5=[63e4f4b7c7497a0e53d6c89ce733691e]
class SaveHandler--><rect codeLine="36" height="908.1151" id="SaveHandler" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="414.5833" x="227.0833" y="286.4583"/><ellipse cx="392.7083" cy="304.0812" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M394.2546,301.1678 Q394.3685,301.005 394.5068,300.9237 Q394.6452,300.8423 394.8079,300.8423 Q395.0846,300.8423 395.2555,301.0376 Q395.4264,301.2329 395.4264,301.6724 L395.4264,302.7466 Q395.4264,303.186 395.2555,303.3813 Q395.0846,303.5767 394.8079,303.5767 Q394.5475,303.5767 394.401,303.4302 Q394.2546,303.3 394.1732,302.9093 Q394.1406,302.6489 394.0104,302.5187 Q393.75,302.242 393.3024,302.0793 Q392.8548,301.9165 392.3991,301.9165 Q391.8457,301.9165 391.3737,302.1606 Q390.9017,302.4048 390.5436,302.95 Q390.1855,303.4953 390.1855,304.2603 L390.1855,305.0741 Q390.1855,305.9692 390.8447,306.5715 Q391.5039,307.1737 392.6595,307.1737 Q393.3594,307.1737 393.8477,306.9946 Q394.1243,306.8807 394.4336,306.5552 Q394.6289,306.3599 394.7428,306.3029 Q394.8568,306.2459 394.987,306.2459 Q395.2474,306.2459 395.4346,306.4331 Q395.6217,306.6203 395.6217,306.8807 Q395.6217,307.1411 395.3613,307.4341 Q394.987,307.8573 394.401,308.1014 Q393.6198,308.4269 392.6758,308.4269 Q391.5527,308.4269 390.6738,307.9712 Q389.9414,307.6131 389.4368,306.8156 Q388.9323,306.0181 388.9323,305.0903 L388.9323,304.244 Q388.9323,303.2674 389.388,302.4211 Q389.8438,301.5747 390.6494,301.119 Q391.4551,300.6632 392.3503,300.6632 Q392.9036,300.6632 393.3757,300.7853 Q393.8477,300.9074 394.2546,301.1678 Z " fill="#000000"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="64.5833" x="417.7083" y="308.7697">SaveHandler</text><line style="stroke:#55B2DE;stroke-width:1.5625;" x1="228.125" x2="640.625" y1="321.7041" y2="321.7041"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="235.4167" y="330.0374"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="120.8333" x="252.0833" y="342.9738">_owner_project: Project</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="235.4167" y="354.8665"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="185.4167" x="252.0833" y="367.8029">_CURRENT_SAVE_VERSION: Integer</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="235.4167" y="379.6956"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="97.9167" x="252.0833" y="392.632">_save_data: Object</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="235.4167" y="404.5247"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="135.4167" x="252.0833" y="417.4611">_lock_save_sync: Boolean</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="235.4167" y="429.3538"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="153.125" x="252.0833" y="442.2902">_objects: Object{VisualObject}</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="228.125" x2="640.625" y1="454.1829" y2="454.1829"/><ellipse cx="238.5417" cy="465.6413" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="143.75" x="252.0833" y="475.4527">SaveHandler(): SaveHandler</text><ellipse cx="238.5417" cy="518.9794" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="242.7083" x="252.0833" y="528.7908">set owner_project(owner_project: Project): void</text><ellipse cx="238.5417" cy="543.8085" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="141.6667" x="252.0833" y="553.6199">get owner_project(): Project</text><ellipse cx="238.5417" cy="568.6376" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="118.75" x="252.0833" y="578.449">get save_data(): Object</text><ellipse cx="238.5417" cy="593.4667" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="198.9583" x="252.0833" y="603.2781">set save_data(save_data: Object): void</text><ellipse cx="238.5417" cy="618.2958" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="102.0833" x="252.0833" y="628.1072">get objects(): Object</text><ellipse cx="238.5417" cy="643.1249" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="163.5417" x="252.0833" y="652.9363">set screen(screen: Object): void</text><ellipse cx="238.5417" cy="667.954" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="84.375" x="252.0833" y="677.7654">get fps(): Integer</text><ellipse cx="238.5417" cy="692.7831" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="128.125" x="252.0833" y="702.5945">set fps(fps: Integer): void</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="228.125" x2="406.7708" y1="499.5166" y2="499.5166"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="44.7917" x="411.9792" y="503.5528">get, set</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="461.9792" x2="640.625" y1="499.5166" y2="499.5166"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="228.125" x2="640.625" y1="714.4872" y2="714.4872"/><ellipse cx="238.5417" cy="725.9455" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="138.5417" x="252.0833" y="735.7569">rewriteSoftwareInfo(): void</text><ellipse cx="238.5417" cy="750.7746" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="117.7083" x="252.0833" y="760.586">loadDefaultSave(): void</text><ellipse cx="238.5417" cy="775.6037" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="225" x="252.0833" y="785.4151">async loadSave(save_file_path: string): void</text><ellipse cx="238.5417" cy="800.4328" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="303.125" x="252.0833" y="810.2442">convertSave(log_array: Array = [], no_dialog: Boolean): void</text><ellipse cx="238.5417" cy="825.2619" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="291.6667" x="252.0833" y="835.0733">convertObjV3ToV4(old_object: Object, save: Object): void</text><ellipse cx="238.5417" cy="850.091" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="126.0417" x="252.0833" y="859.9024">applyLoadedSave(): void</text><ellipse cx="238.5417" cy="874.9201" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="136.4583" x="252.0833" y="884.7315">exportSaveAsJSON(): void</text><ellipse cx="238.5417" cy="899.7492" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="320.8333" x="252.0833" y="909.5606">exportSave(save_path: String, no_dialog: Boolean = false): void</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="255.2083" y="934.3898"/><ellipse cx="238.5417" cy="949.4075" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="378.125" x="252.0833" y="959.2189">createVisualObject(type: String, name: String = null, obj_id: String = ""): void</text><ellipse cx="238.5417" cy="974.2366" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="217.7083" x="252.0833" y="984.048">addVisualObject(object: VisualObject): void</text><ellipse cx="238.5417" cy="999.0657" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="172.9167" x="252.0833" y="1008.8771">deleteVisualObject(id: String): void</text><ellipse cx="238.5417" cy="1023.8948" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="147.9167" x="252.0833" y="1033.7062">deleteAllVisualObjects(): void</text><ellipse cx="238.5417" cy="1048.7239" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="181.25" x="252.0833" y="1058.5353">getVisualObjectData(id: String): void</text><ellipse cx="238.5417" cy="1073.553" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="263.5417" x="252.0833" y="1083.3644">mergeVisualObjectData(id: String, data: Object): void</text><ellipse cx="238.5417" cy="1098.3821" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="173.9583" x="252.0833" y="1108.1935">getVisualObjectIDs(): Array[String]</text><ellipse cx="238.5417" cy="1123.2112" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="356.25" x="252.0833" y="1133.0226">async saveObjectBackgroundImage(path: String, obj_id: String): Object</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="255.2083" y="1157.8517"/><ellipse cx="238.5417" cy="1172.8694" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="181.25" x="252.0833" y="1182.6808">async saveAudio(path: String): void</text><!--MD5=[79d378210367c0c6ec62ef762ddfbd1b]
class Project--><rect codeLine="78" height="1975.7665" id="Project" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="327.0833" x="500" y="1258.3333"/><ellipse cx="636.9792" cy="1275.9562" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M638.5254,1273.0428 Q638.6393,1272.88 638.7777,1272.7987 Q638.916,1272.7173 639.0788,1272.7173 Q639.3555,1272.7173 639.5264,1272.9126 Q639.6973,1273.1079 639.6973,1273.5474 L639.6973,1274.6216 Q639.6973,1275.061 639.5264,1275.2563 Q639.3555,1275.4517 639.0788,1275.4517 Q638.8184,1275.4517 638.6719,1275.3052 Q638.5254,1275.175 638.444,1274.7843 Q638.4115,1274.5239 638.2813,1274.3937 Q638.0208,1274.117 637.5732,1273.9543 Q637.1257,1273.7915 636.6699,1273.7915 Q636.1165,1273.7915 635.6445,1274.0356 Q635.1725,1274.2798 634.8145,1274.825 Q634.4564,1275.3703 634.4564,1276.1353 L634.4564,1276.9491 Q634.4564,1277.8442 635.1156,1278.4465 Q635.7747,1279.0487 636.9303,1279.0487 Q637.6302,1279.0487 638.1185,1278.8696 Q638.3952,1278.7557 638.7044,1278.4302 Q638.8997,1278.2349 639.0137,1278.1779 Q639.1276,1278.1209 639.2578,1278.1209 Q639.5182,1278.1209 639.7054,1278.3081 Q639.8926,1278.4953 639.8926,1278.7557 Q639.8926,1279.0161 639.6322,1279.3091 Q639.2578,1279.7323 638.6719,1279.9764 Q637.8906,1280.3019 636.9466,1280.3019 Q635.8236,1280.3019 634.9447,1279.8462 Q634.2122,1279.4881 633.7077,1278.6906 Q633.2031,1277.8931 633.2031,1276.9653 L633.2031,1276.119 Q633.2031,1275.1424 633.6589,1274.2961 Q634.1146,1273.4497 634.9202,1272.994 Q635.7259,1272.5382 636.6211,1272.5382 Q637.1745,1272.5382 637.6465,1272.6603 Q638.1185,1272.7824 638.5254,1273.0428 Z " fill="#000000"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="34.375" x="661.9792" y="1280.6447">Project</text><line style="stroke:#55B2DE;stroke-width:1.5625;" x1="501.0417" x2="826.0417" y1="1293.5791" y2="1293.5791"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1301.9124"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="145.8333" x="525" y="1314.8488">_save_handler: SaveHandler</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1326.7415"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="155.2083" x="525" y="1339.6779">_user_interface: UserInterface</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1364.507"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1376.3997"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="101.0417" x="525" y="1389.3361">_working_dir: String</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1401.2288"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="80.2083" x="525" y="1414.1652">_root_dir: String</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1426.0579"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="54.1667" x="525" y="1438.9943">_os: String</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1450.887"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="118.75" x="525" y="1463.8234">_export_mode: Boolean</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1488.6525"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1500.5452"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="128.125" x="525" y="1513.4816">_stop_animating: Boolean</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1525.3743"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="100" x="525" y="1538.3108">_animating: Boolean</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1563.1399"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1575.0326"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="110.4167" x="525" y="1587.969">_frame_count: Integer</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1599.8617"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="91.6667" x="525" y="1612.7981">_fps_array: Array</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1624.6908"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="95.8333" x="525" y="1637.6272">_fps_interval: Float</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1649.5199"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="190.625" x="525" y="1662.4563">_FPS_ARRAY_MAX_LENGTH: Integer</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1687.2854"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1699.1781"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="64.5833" x="525" y="1712.1145">_time: Object</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1736.9436"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1748.8363"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="98.9583" x="525" y="1761.7727">_current_time: Float</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1773.6654"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="110.4167" x="525" y="1786.6018">_audio_duration: Float</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1798.4945"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="157.2917" x="525" y="1811.4309">_frequency_array: Array[Float]</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1823.3236"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="178.125" x="525" y="1836.26">_vol_frequency_array: Array[Float]</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1848.1527"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="207.2917" x="525" y="1861.0891">_vol_prev_frequency_array: Array[Float]</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1872.9818"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="71.875" x="525" y="1885.9182">_volume: Float</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1910.7473"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1922.64"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="171.875" x="525" y="1935.5764">_objects_callback: Array[Boolean]</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="1960.4055"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1972.2982"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="135.4167" x="525" y="1985.2346">_audio: HTMLAudioElement</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="1997.1273"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="117.7083" x="525" y="2010.0637">_audio_file_type: String</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="2021.9564"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="77.0833" x="525" y="2034.8928">_audio_file: File</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="2046.7855"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="207.2917" x="525" y="2059.7219">_source: MediaElementAudioSourceNode</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="2071.6146"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="117.7083" x="525" y="2084.551">_context: AudioContext</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="2096.4437"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="128.125" x="525" y="2109.3801">_analyser: AnalyserNode</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="508.3333" y="2121.2728"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="173.9583" x="525" y="2134.2092">_ctx_frequency_array: Uint8Array</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="501.0417" x2="826.0417" y1="2146.1019" y2="2146.1019"/><ellipse cx="511.4583" cy="2157.5602" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="195.8333" x="525" y="2167.3716">Project(export_mode: Boolean): Project</text><ellipse cx="511.4583" cy="2210.8983" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="166.6667" x="525" y="2220.7097">get save_handler(): SaveHandler</text><ellipse cx="511.4583" cy="2235.7274" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="262.5" x="525" y="2245.5388">set save_handler(save_handler: SaveHandler): void</text><ellipse cx="511.4583" cy="2260.5565" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="176.0417" x="525" y="2270.3679">get user_interface(): UserInterface</text><ellipse cx="511.4583" cy="2285.3856" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="277.0833" x="525" y="2295.197">set user_interface(user_interface: UserInterface): void</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="2320.0261"/><ellipse cx="511.4583" cy="2335.0438" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="121.875" x="525" y="2344.8552">get working_dir(): String</text><ellipse cx="511.4583" cy="2359.8729" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="101.0417" x="525" y="2369.6843">get root_dir(): String</text><ellipse cx="511.4583" cy="2384.702" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="139.5833" x="525" y="2394.5134">get export_mode(): Boolean</text><ellipse cx="511.4583" cy="2409.5311" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="75" x="525" y="2419.3425">get os(): String</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="2444.1717"/><ellipse cx="511.4583" cy="2459.1894" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="92.7083" x="525" y="2469.0008">get volume(): Float</text><ellipse cx="511.4583" cy="2484.0185" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="151.0417" x="525" y="2493.8299">get screen(): HTMLDivElement</text><ellipse cx="511.4583" cy="2508.8476" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="138.5417" x="525" y="2518.659">get audio_file_type(): String</text><ellipse cx="511.4583" cy="2533.6767" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="241.6667" x="525" y="2543.4881">set audio_file_type(audio_file_type: String): void</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="2568.3172"/><ellipse cx="511.4583" cy="2583.3349" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="178.125" x="525" y="2593.1463">get frequency_array(): Array[Float]</text><ellipse cx="511.4583" cy="2608.164" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="290.625" x="525" y="2617.9754">set frequency_array(frequency_array: Array[Float]): void</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="501.0417" x2="635.9375" y1="2191.4355" y2="2191.4355"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="44.7917" x="641.1458" y="2195.4717">get, set</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="691.1458" x2="826.0417" y1="2191.4355" y2="2191.4355"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="501.0417" x2="826.0417" y1="2629.8681" y2="2629.8681"/><ellipse cx="511.4583" cy="2641.3264" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="207.2917" x="525" y="2651.1378">addToFrequencyArray(value: Float): void</text><ellipse cx="511.4583" cy="2666.1555" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="93.75" x="525" y="2675.9669">playVisuals(): void</text><ellipse cx="511.4583" cy="2690.9846" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="104.1667" x="525" y="2700.796">pauseVisuals(): void</text><ellipse cx="511.4583" cy="2715.8137" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="94.7917" x="525" y="2725.6251">stopVisuals(): void</text><ellipse cx="511.4583" cy="2740.6428" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="164.5833" x="525" y="2750.4542">startAnimating(fps: Integer): void</text><ellipse cx="511.4583" cy="2765.4719" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="106.25" x="525" y="2775.2833">stopAnimating(): void</text><ellipse cx="511.4583" cy="2790.301" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="73.9583" x="525" y="2800.1124">animate(): void</text><ellipse cx="511.4583" cy="2815.1301" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="131.25" x="525" y="2824.9415">updateFinished(): Boolean</text><ellipse cx="511.4583" cy="2839.9592" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="93.75" x="525" y="2849.7706">drawFrame(): void</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="2874.5997"/><ellipse cx="511.4583" cy="2889.6174" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="216.6667" x="525" y="2899.4288">loadAudio(file_data: any, type: String): void</text><ellipse cx="511.4583" cy="2914.4465" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="91.6667" x="525" y="2924.2579">closeAudio(): void</text><ellipse cx="511.4583" cy="2939.2756" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="114.5833" x="525" y="2949.087">audioReady(): Boolean</text><ellipse cx="511.4583" cy="2964.1047" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="125" x="525" y="2973.9161">getAudioDuration(): Float</text><ellipse cx="511.4583" cy="2988.9338" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="98.9583" x="525" y="2998.7452">audioToStart(): void</text><ellipse cx="511.4583" cy="3013.7629" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="93.75" x="525" y="3023.5743">audioToEnd(): void</text><ellipse cx="511.4583" cy="3038.592" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="230.2083" x="525" y="3048.4034">setAudioCurrentTime(currentTime: Float): void</text><ellipse cx="511.4583" cy="3063.4211" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="143.75" x="525" y="3073.2325">getAudioCurrentTime(): Float</text><ellipse cx="511.4583" cy="3088.2502" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="120.8333" x="525" y="3098.0616">audioLoopToggle(): void</text><ellipse cx="511.4583" cy="3113.0793" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="147.9167" x="525" y="3122.8907">getAudioIsLooping(): Boolean</text><ellipse cx="511.4583" cy="3137.9084" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="172.9167" x="525" y="3147.7198">getFrequencyArray(): Array[Float]</text><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="528.125" y="3172.5489"/><ellipse cx="511.4583" cy="3187.5666" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="126.0417" x="525" y="3197.378">updateFPSDisplay(): void</text><ellipse cx="511.4583" cy="3212.3957" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="128.125" x="525" y="3222.2071">setFPS(fps: Integer): void</text><!--MD5=[a7661dae5b0d701614a666888c8235ba]
class UserInterface--><rect codeLine="160" height="312.2167" id="UserInterface" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;fill:none;" width="426.0417" x="678.6458" y="584.375"/><ellipse cx="847.9167" cy="601.9979" fill="#777777" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M849.4629,599.0845 Q849.5768,598.9217 849.7152,598.8403 Q849.8535,598.759 850.0163,598.759 Q850.293,598.759 850.4639,598.9543 Q850.6348,599.1496 850.6348,599.589 L850.6348,600.6632 Q850.6348,601.1027 850.4639,601.298 Q850.293,601.4933 850.0163,601.4933 Q849.7559,601.4933 849.6094,601.3468 Q849.4629,601.2166 849.3815,600.826 Q849.349,600.5656 849.2188,600.4354 Q848.9583,600.1587 848.5107,599.9959 Q848.0632,599.8332 847.6074,599.8332 Q847.054,599.8332 846.582,600.0773 Q846.11,600.3215 845.752,600.8667 Q845.3939,601.4119 845.3939,602.1769 L845.3939,602.9907 Q845.3939,603.8859 846.0531,604.4881 Q846.7122,605.0903 847.8678,605.0903 Q848.5677,605.0903 849.056,604.9113 Q849.3327,604.7974 849.6419,604.4718 Q849.8372,604.2765 849.9512,604.2196 Q850.0651,604.1626 850.1953,604.1626 Q850.4557,604.1626 850.6429,604.3498 Q850.8301,604.5369 850.8301,604.7974 Q850.8301,605.0578 850.5697,605.3507 Q850.1953,605.7739 849.6094,606.0181 Q848.8281,606.3436 847.8841,606.3436 Q846.7611,606.3436 845.8822,605.8879 Q845.1497,605.5298 844.6452,604.7323 Q844.1406,603.9347 844.1406,603.007 L844.1406,602.1606 Q844.1406,601.1841 844.5964,600.3377 Q845.0521,599.4914 845.8577,599.0356 Q846.6634,598.5799 847.5586,598.5799 Q848.112,598.5799 848.584,598.702 Q849.056,598.8241 849.4629,599.0845 Z " fill="#000000"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="68.75" x="872.9167" y="606.6864">UserInterface</text><line style="stroke:#55B2DE;stroke-width:1.5625;" x1="679.6875" x2="1103.6458" y1="619.6208" y2="619.6208"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="686.9792" y="627.9541"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="130.2083" x="703.6458" y="640.8905">_screen: HTMLDivElement</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="686.9792" y="652.7832"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="141.6667" x="703.6458" y="665.7196">_object_frame: ObjectFrame</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="686.9792" y="677.6123"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="120.8333" x="703.6458" y="690.5487">_owner_project: Project</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="686.9792" y="702.4414"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="163.5417" x="703.6458" y="715.3778">_loading_frame: UILoadingFrame</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="679.6875" x2="1103.6458" y1="727.2705" y2="727.2705"/><ellipse cx="690.1042" cy="738.7288" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="266.6667" x="703.6458" y="748.5402">UserInterface(owner_project: Project): UserInterface</text><ellipse cx="690.1042" cy="792.067" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="151.0417" x="703.6458" y="801.8784">get screen(): HTMLDivElement</text><ellipse cx="690.1042" cy="816.8961" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="242.7083" x="703.6458" y="826.7075">set owner_project(owner_project: Project): void</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="679.6875" x2="864.0625" y1="772.6041" y2="772.6041"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="44.7917" x="869.2708" y="776.6403">get, set</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="919.2708" x2="1103.6458" y1="772.6041" y2="772.6041"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;stroke-dasharray:1.0,2.0;" x1="679.6875" x2="1103.6458" y1="838.6002" y2="838.6002"/><ellipse cx="690.1042" cy="850.0585" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="389.5833" x="703.6458" y="859.8699">async FileBrowserDialog(settings: Object, callback: Function, args: any): void</text><ellipse cx="690.1042" cy="874.8876" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="&quot;Verdana&quot;" font-size="11.4583" lengthAdjust="spacing" textLength="193.75" x="703.6458" y="884.699">loadingMode(is_loading: boolean): void</text><!--MD5=[8ac0a6a22443ef373ab915bdd0ae6b94]
link SaveHandler to Project--><path codeLine="74" d="M503.4479,1194.8542 C506.6042,1215.6042 509.8229,1236.7188 513.0833,1258.1146 " fill="none" id="SaveHandler-Project" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="96.875" x="401.6297" y="1222.1647">1 _save_handler</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="102.0833" x="404.1768" y="1242.4731">1 _owner_project</text><!--MD5=[501579efbb51ee37b3ceb7cdc80c9a34]
link VisualObject to SaveHandler--><path codeLine="75" d="M168.2292,740.625 C183.2188,740.625 198.2083,740.625 213.1979,740.625 " fill="none" id="VisualObject-to-SaveHandler" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#222222" points="226.9688,740.625,220.7188,736.4583,214.4688,740.625,220.7188,744.7917,226.9688,740.625" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="78.125" x="135.499" y="769.8598">0..n _objects</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="96.875" x="115.862" y="711.5178">1 _save_handler</text><!--MD5=[6d70af9e65e4289cc63577fd29a6402c]
link EventMixin to SaveHandler--><path codeLine="76" d="M434.375,151.2917 C434.375,182.5521 434.375,230.75 434.375,286.4062 " fill="none" id="EventMixin-SaveHandler" style="stroke:#2A9FD6;stroke-width:3.125;stroke-dasharray:7.0,7.0;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="23.9583" x="440.625" y="204.6824">with</text><!--MD5=[bfea16aa11a7c0957284c136315aff4f]
link UserInterface to Project--><path codeLine="174" d="M868.1146,896.9167 C853.9271,990.4271 834.5208,1118.3125 813.2917,1258.2813 " fill="none" id="UserInterface-Project" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="103.125" x="755.8906" y="924.4244">1 _user_interface</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="102.0833" x="706.7305" y="1242.6411">1 _owner_project</text><!--MD5=[26ed854ec54ffce7cd7cea0258e4fb56]
link UserInterface to ObjectFrame--><path codeLine="175" d="M976.8542,897.1146 C1027.6667,997.2604 1088.5938,1131.9167 1121.875,1258.3333 C1219.9479,1630.8021 1219,2106.1458 1217.1979,2220 " fill="none" id="UserInterface-ObjectFrame" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="103.125" x="869.8085" y="924.0996">1 _user_interface</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="13.5417" lengthAdjust="spacing" textLength="95.8333" x="1105.3088" y="2204.0093">1 _object_frame</text><!--MD5=[01f58dd46eb2f89d57cd8d3504415397]
@startuml index

'Wav2Bar - Free software for creating audio visualization (motion design) videos
'Copyright (C) 2022  Picorims <picorims.contact@gmail.com>

'This program is free software: you can redistribute it and/or modify
'it under the terms of the GNU General Public License as published by
'the Free Software Foundation, either version 3 of the License, or
'any later version.

'This program is distributed in the hope that it will be useful,
'but WITHOUT ANY WARRANTY; without even the implied warranty of
'MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
'GNU General Public License for more details.

'You should have received a copy of the GNU General Public License
'along with this program.  If not, see <https://www.gnu.org/licenses/>.

!theme cyborg-outline
skinparam BackgroundColor #222222
' skinparam groupInheritance 2
skinparam PackageStyle frame

package "visual_objects" {
    class VisualObject {}
}

package "event_mixin" {
    class EventMixin <<mixin>> {}
}

package "ui_components" {
    class ObjectFrame {}
}

package "index" {
    class SaveHandler {
        - _owner_project: Project
        - _CURRENT_SAVE_VERSION: Integer
        - _save_data: Object
        - _lock_save_sync: Boolean
        - _objects: Object{VisualObject}
        - -
        + SaveHandler(): SaveHandler
        ..get, set..
        + set owner_project(owner_project: Project): void
        + get owner_project(): Project
        + get save_data(): Object
        + set save_data(save_data: Object): void
        + get objects(): Object
        + set screen(screen: Object): void
        + get fps(): Integer
        + set fps(fps: Integer): void
        ..
        + rewriteSoftwareInfo(): void
        + loadDefaultSave(): void
        + async loadSave(save_file_path: string): void
        + convertSave(log_array: Array = [], no_dialog: Boolean): void
        + convertObjV3ToV4(old_object: Object, save: Object): void
        + applyLoadedSave(): void
        + exportSaveAsJSON(): void
        + exportSave(save_path: String, no_dialog: Boolean = false): void
        
        + createVisualObject(type: String, name: String = null, obj_id: String = ""): void
        + addVisualObject(object: VisualObject): void
        + deleteVisualObject(id: String): void
        + deleteAllVisualObjects(): void
        + getVisualObjectData(id: String): void
        + mergeVisualObjectData(id: String, data: Object): void
        + getVisualObjectIDs(): Array[String]
        + async saveObjectBackgroundImage(path: String, obj_id: String): Object

        + async saveAudio(path: String): void
    }
    SaveHandler "1 _save_handler" - - "1 _owner_project" Project
    SaveHandler "1 _save_handler" o-left- "0..n _objects" VisualObject
    SaveHandler .up. EventMixin: with

    class Project {
        - _save_handler: SaveHandler
        - _user_interface: UserInterface

        - _working_dir: String
        - _root_dir: String
        - _os: String
        - _export_mode: Boolean

        - _stop_animating: Boolean
        - _animating: Boolean

        - _frame_count: Integer
        - _fps_array: Array
        - _fps_interval: Float
        - _FPS_ARRAY_MAX_LENGTH: Integer

        - _time: Object

        - _current_time: Float
        - _audio_duration: Float
        - _frequency_array: Array[Float]
        - _vol_frequency_array: Array[Float]
        - _vol_prev_frequency_array: Array[Float]
        - _volume: Float
    
        - _objects_callback: Array[Boolean]

        - _audio: HTMLAudioElement
        - _audio_file_type: String
        - _audio_file: File
        - _source: MediaElementAudioSourceNode
        - _context: AudioContext
        - _analyser: AnalyserNode
        - _ctx_frequency_array: Uint8Array
        - -
        + Project(export_mode: Boolean): Project
        ..get, set..
        + get save_handler(): SaveHandler
        + set save_handler(save_handler: SaveHandler): void
        + get user_interface(): UserInterface
        + set user_interface(user_interface: UserInterface): void

        + get working_dir(): String
        + get root_dir(): String
        + get export_mode(): Boolean
        + get os(): String

        + get volume(): Float
        + get screen(): HTMLDivElement
        + get audio_file_type(): String
        + set audio_file_type(audio_file_type: String): void

        + get frequency_array(): Array[Float]
        + set frequency_array(frequency_array: Array[Float]): void
        ..
        + addToFrequencyArray(value: Float): void
        + playVisuals(): void
        + pauseVisuals(): void
        + stopVisuals(): void
        + startAnimating(fps: Integer): void
        + stopAnimating(): void
        + animate(): void
        + updateFinished(): Boolean
        + drawFrame(): void

        + loadAudio(file_data: any, type: String): void
        + closeAudio(): void
        + audioReady(): Boolean
        + getAudioDuration(): Float
        + audioToStart(): void
        + audioToEnd(): void
        + setAudioCurrentTime(currentTime: Float): void
        + getAudioCurrentTime(): Float
        + audioLoopToggle(): void
        + getAudioIsLooping(): Boolean
        + getFrequencyArray(): Array[Float]

        + updateFPSDisplay(): void
        + setFPS(fps: Integer): void
    }

    class UserInterface {
        - _screen: HTMLDivElement
        - _object_frame: ObjectFrame
        - _owner_project: Project
        - _loading_frame: UILoadingFrame
        - -
        + UserInterface(owner_project: Project): UserInterface
        ..get, set..
        + get screen(): HTMLDivElement
        + set owner_project(owner_project: Project): void
        ..
        + async FileBrowserDialog(settings: Object, callback: Function, args: any): void
        + loadingMode(is_loading: boolean): void
    }
    UserInterface "1 _user_interface" - - "1 _owner_project" Project
    UserInterface "1 _user_interface" - - "1 _object_frame" ObjectFrame
}
@end

@startuml index








skinparam backgroundColor transparent
skinparam useBetaStyle false






<style>
  root {
    BackgroundColor transparent
    FontColor #2A9FD6
    HyperLinkColor #fd7e14
    LineColor #55B2DE
    LineThickness 1
    Margin 10
    Padding 6
    Shadowing 0.0
  }
  node {
   Padding 15
   roundcorner 20
   BackgroundColor transparent
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  groupHeader {
    BackgroundColor #555
    FontColor #9933CC
    FontStyle bold
  }
  header {
    LineThickness 0
  }
  referenceHeader {
    BackgroundColor transparent
    FontColor #ADAFAE
    FontStyle bold
  }
  separator {
    BackgroundColor #FFF
    FontColor transparent
    FontStyle bold
  }
  title {
	FontSize 20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor  transparent
	FontColor #2A9FD6
	BorderColor #555
  }
  nwdiagDiagram {
	network {
			FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent    
		LineColor #2A9FD6
		LineThickness 1.0
		FontColor #227FAB
	}
	server {
			FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	}
	arrow {
		FontColor #227FAB
		LineColor #227FAB
	}
	group {
		BackGroundColor #222
		LineColor #4E4E4E
		LineThickness 2.0
		Margin 5
		Padding 5
	}
  }
  ganttDiagram {
	task {
			FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
		LineColor #2A9FD6
		Margin 10
		Padding 6
	}
	note {
		FontColor #9933CC
		LineColor #AD5CD6
		BackGroundColor transparent
	}
	separator {
		LineColor #777777
		BackGroundColor transparent
		FontColor #777777
	}
	milestone {
		FontColor #9933CC
		FontSize 16
		FontStyle italic
		BackGroundColor #555
		LineColor #777777
	}
	timeline {
		BackgroundColor #555
		FontColor #777777
	}
	closed {
		BackgroundColor #FFA033
		FontColor #FF8800
	}
  }
</style>
skinparam defaultFontName       "Verdana"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #ADAFAE
skinparam stereotype {
    CBackgroundColor #777777
    CBorderColor #444444
    ABackgroundColor #5F8F00
    ABorderColor #92C233
    IBackgroundColor #a30000
    IBorderColor #D63333
    EBackgroundColor #cc6d00
    EBorderColor #FFA033
    NBackgroundColor #7a29a3
    NBorderColor #AD5CD6
}
skinparam title {
	FontColor	                 #2A9FD6
	BorderColor	                 #777777
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              transparent
}

skinparam legend {
	BackgroundColor transparent
	BorderColor #777777
	FontColor #ADAFAE
}

skinparam swimlane {
	BorderColor #9933CC
	BorderThickness 2
	TitleBackgroundColor  #444444-#555
	TitleFontColor #2A9FD6
}


skinparam activity {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BarColor #77B300
	StartColor #9933CC
	EndColor #9933CC
	DiamondBackgroundColor transparent
  	DiamondBorderColor #777777
  	DiamondFontColor #777777
}


skinparam participant {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam arrow {
	Thickness 3
	Color #2A9FD6
	FontColor #FFF
}


skinparam sequence {
	BorderColor #2A9FD6
	TitleFontColor #2A9FD6
	BackgroundColor transparent
	StartColor #2A9FD6
	EndColor #2A9FD6
	BoxBackgroundColor transparent
	BoxBorderColor #ADAFAE
	BoxFontColor #ADAFAE
	DelayFontColor #ADAFAE
	LifeLineBorderColor #555
	LifeLineBorderThickness 2
	LifeLineBackgroundColor transparent
	GroupBorderColor #ADAFAE
	GroupFontColor #ADAFAE
	GroupHeaderFontColor #9933CC
	GroupBackgroundColor transparent
	GroupHeaderBackgroundColor transparent
	DividerBackgroundColor transparent
    DividerBorderColor #ADAFAE
    DividerBorderThickness 2
    DividerFontColor #ADAFAE
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #ADAFAE
	ReferenceFontColor #ADAFAE
	ReferenceHeaderFontColor #9933CC
	ReferenceHeaderBackgroundColor transparent
	StereotypeFontColor #2A9FD6
}


skinparam partition {
	BorderColor #2A9FD6
	FontColor #2A9FD6
	BackgroundColor transparent
}


skinparam collections {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam control {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam entity {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam boundary {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam agent {
	BackgroundColor transparent
	BorderColor #cc6d00
	FontColor #ADAFAE
}


skinparam note {
	BorderThickness 1
	BackgroundColor transparent
	BorderColor #AD5CD6
	FontColor #AD5CD6
}


skinparam artifact {
	BackgroundColor transparent
	BorderColor #BDBFBE
	FontColor #BDBFBE
}


skinparam component {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam interface {
	BackgroundColor  transparent
	BorderColor  #CC0000
	FontColor #ADAFAE
}


skinparam storage {
	BackgroundColor transparent
  	BorderColor #FFA033
	FontColor #FF8800
}


skinparam node {
	BackgroundColor  transparent
	BorderColor #ADAFAE
	FontColor #ADAFAE
}


skinparam cloud {
	BackgroundColor transparent
	BorderColor #F2FCFE
	FontColor #ADAFAE
}


skinparam database {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}



skinparam class {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
        FontColor #222
	HeaderBackgroundColor #227FAB
	StereotypeFontColor #ADAFAE
	BorderThickness 1
	AttributeFontColor #ADAFAE
	AttributeFontSize 11
}


skinparam object {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	StereotypeFontColor #ADAFAE
	BorderThickness 1
	AttributeFontColor #777777
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #2A9FD6
}


skinparam rectangle {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #2A9FD6
}


skinparam package {
	BackgroundColor transparent
  	BorderColor #2A9FD6
	FontColor #2A9FD6
	BorderThickness 2
}


skinparam folder {
	BackgroundColor transparent
  	BorderColor #FF8800
	FontColor #FF8800
	BorderThickness 2
}


skinparam frame {
	BackgroundColor transparent
  	BorderColor #9933CC
	FontColor #9933CC
	BorderThickness 2
}


skinparam state {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	StartColor #9933CC
	EndColor #9933CC
	AttributeFontColor #777777
	AttributeFontSize 11
}


skinparam queue {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam card {
	BackgroundColor transparent
	BorderColor #9933CC
	FontColor #9933CC
}


skinparam file {
	BackgroundColor transparent
	BorderColor #555
	FontColor #555
}


skinparam stack {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}
skinparam BackgroundColor #222222
skinparam PackageStyle frame

package "visual_objects" {
    class VisualObject {}
}

package "event_mixin" {
    class EventMixin <<mixin>> {}
}

package "ui_components" {
    class ObjectFrame {}
}

package "index" {
    class SaveHandler {
        - _owner_project: Project
        - _CURRENT_SAVE_VERSION: Integer
        - _save_data: Object
        - _lock_save_sync: Boolean
        - _objects: Object{VisualObject}
        - -
        + SaveHandler(): SaveHandler
        ..get, set..
        + set owner_project(owner_project: Project): void
        + get owner_project(): Project
        + get save_data(): Object
        + set save_data(save_data: Object): void
        + get objects(): Object
        + set screen(screen: Object): void
        + get fps(): Integer
        + set fps(fps: Integer): void
        ..
        + rewriteSoftwareInfo(): void
        + loadDefaultSave(): void
        + async loadSave(save_file_path: string): void
        + convertSave(log_array: Array = [], no_dialog: Boolean): void
        + convertObjV3ToV4(old_object: Object, save: Object): void
        + applyLoadedSave(): void
        + exportSaveAsJSON(): void
        + exportSave(save_path: String, no_dialog: Boolean = false): void
        
        + createVisualObject(type: String, name: String = null, obj_id: String = ""): void
        + addVisualObject(object: VisualObject): void
        + deleteVisualObject(id: String): void
        + deleteAllVisualObjects(): void
        + getVisualObjectData(id: String): void
        + mergeVisualObjectData(id: String, data: Object): void
        + getVisualObjectIDs(): Array[String]
        + async saveObjectBackgroundImage(path: String, obj_id: String): Object

        + async saveAudio(path: String): void
    }
    SaveHandler "1 _save_handler" - - "1 _owner_project" Project
    SaveHandler "1 _save_handler" o-left- "0..n _objects" VisualObject
    SaveHandler .up. EventMixin: with

    class Project {
        - _save_handler: SaveHandler
        - _user_interface: UserInterface

        - _working_dir: String
        - _root_dir: String
        - _os: String
        - _export_mode: Boolean

        - _stop_animating: Boolean
        - _animating: Boolean

        - _frame_count: Integer
        - _fps_array: Array
        - _fps_interval: Float
        - _FPS_ARRAY_MAX_LENGTH: Integer

        - _time: Object

        - _current_time: Float
        - _audio_duration: Float
        - _frequency_array: Array[Float]
        - _vol_frequency_array: Array[Float]
        - _vol_prev_frequency_array: Array[Float]
        - _volume: Float
    
        - _objects_callback: Array[Boolean]

        - _audio: HTMLAudioElement
        - _audio_file_type: String
        - _audio_file: File
        - _source: MediaElementAudioSourceNode
        - _context: AudioContext
        - _analyser: AnalyserNode
        - _ctx_frequency_array: Uint8Array
        - -
        + Project(export_mode: Boolean): Project
        ..get, set..
        + get save_handler(): SaveHandler
        + set save_handler(save_handler: SaveHandler): void
        + get user_interface(): UserInterface
        + set user_interface(user_interface: UserInterface): void

        + get working_dir(): String
        + get root_dir(): String
        + get export_mode(): Boolean
        + get os(): String

        + get volume(): Float
        + get screen(): HTMLDivElement
        + get audio_file_type(): String
        + set audio_file_type(audio_file_type: String): void

        + get frequency_array(): Array[Float]
        + set frequency_array(frequency_array: Array[Float]): void
        ..
        + addToFrequencyArray(value: Float): void
        + playVisuals(): void
        + pauseVisuals(): void
        + stopVisuals(): void
        + startAnimating(fps: Integer): void
        + stopAnimating(): void
        + animate(): void
        + updateFinished(): Boolean
        + drawFrame(): void

        + loadAudio(file_data: any, type: String): void
        + closeAudio(): void
        + audioReady(): Boolean
        + getAudioDuration(): Float
        + audioToStart(): void
        + audioToEnd(): void
        + setAudioCurrentTime(currentTime: Float): void
        + getAudioCurrentTime(): Float
        + audioLoopToggle(): void
        + getAudioIsLooping(): Boolean
        + getFrequencyArray(): Array[Float]

        + updateFPSDisplay(): void
        + setFPS(fps: Integer): void
    }

    class UserInterface {
        - _screen: HTMLDivElement
        - _object_frame: ObjectFrame
        - _owner_project: Project
        - _loading_frame: UILoadingFrame
        - -
        + UserInterface(owner_project: Project): UserInterface
        ..get, set..
        + get screen(): HTMLDivElement
        + set owner_project(owner_project: Project): void
        ..
        + async FileBrowserDialog(settings: Object, callback: Function, args: any): void
        + loadingMode(is_loading: boolean): void
    }
    UserInterface "1 _user_interface" - - "1 _owner_project" Project
    UserInterface "1 _user_interface" - - "1 _object_frame" ObjectFrame
}
@end

PlantUML version 1.2022.0(Tue Jan 11 17:16:42 CET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>